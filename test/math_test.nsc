#! /usr/bin/ngraph

set +e

while [ -n "$1" ]
do
    new io
    io::open $1 "r"

    while l=${io::gets}
    do
	eqn=${l%#*}
	val=${l#*#}

	RESULT=`dexpr "$eqn"`
	if [ "$RESULT" != "$val" ]
	then
	    echo
	    echo error "$eqn"
	    echo '    expected:' "$val"
	    echo '      result:' "$RESULT"
	    echo '  difference:' `dexpr $RESULT-$val`
	fi
    done

    io::close
    shift
done


del system
