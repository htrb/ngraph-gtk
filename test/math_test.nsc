#! /usr/bin/ngraph

set +e

while [ -n "$1" ]
do
    new io
    io::open "r" $1

    while l=`get io -field gets`
    do
	eqn=${l%#*}
	val=${l#*#}

	RESULT=`dexpr "$eqn"`
	if [ "$RESULT" != "$val" ]
	then
	    echo
	    echo error "$eqn"
	    echo '    expected:' "$val"
	    echo '      result:' "$RESULT"
	    echo '  difference:' `dexpr $RESULT-$val`
	else
	    echo "OK. ($eqn)"
	fi
    done

    io::close
    shift
done


del system
