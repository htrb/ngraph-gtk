<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Script</title>
</head>
<body>
<a name="TOP">&nbsp;</a>
<h1><a href="./ngraph.html">Ngraphスクリプト</a></h1>
<ul>
<li><a href="#SCRIPT">概要</a>
<li><a href="#SCRIPT_SYNTAX">スクリプトの文法</a>
<li><a href="#SCRIPT_STARTUP">スタートアップスクリプト</a>
<li><a href="#COMMANDLINE">コマンドラインオプション</a>
</ul>

<br>
<hr size="5">
<br>


<a name="SCRIPT">&nbsp;</a>
<h2><a href="#TOP">概要</a></h2>
<br>
<div>
Ngraph はスクリプト言語(Ngraph スクリプト)のインタープリタを備えています。
グラフの設定(実際には各オブジェクトOBJECTのフィールド値)もNgraph スクリプト形式で保存されます。<br>
</div>

<br>
<hr>
<br>



<a name="SCRIPT_SYNTAX">&nbsp;</a>
<h2><a href="#TOP">スクリプトの文法</a></h2>
<br>
<div>
Ngraph スクリプトの文法は， UNIX の sh (シェル) からジョブ制御機能を取り去り, オブジェクト操作命令を追加したものになっています。<br>
shと同等の文法・コマンドは以下の通りです(sh の文法の詳細については UNIX のマニュアルを参照してください)。<br>
<br>
コマンド<br>
<div>
name1=val1 name2=val2 ... command arg1 arg2 arg3 ...
</div>
コメント<br>
<div>
# comment
</div>
制御構造 (for,  case,  if,  while,  until 文)<br>
<div>
for name [in word] do list done<br>
case word in [patterm [|pattern] ...list;;] ... esac<br>
if list then list [elif list then list]...[else list] fi<br>
while list do list done<br>
until list do list done<br>
</div>
関数定義 ({}は常に必要)<br>
<div>
name() { list; }
</div>
ファイル名置換<br>
<div>
*?[]
</div>
コマンド置換<br>
<div>
`command`
</div>
変数定義<br>
<div>
name=value [ name=value ] ...
</div>
変数置換<br>
<div>
$# $? $num $* $@<br>
${name}<br>
${name:-word}<br>
${name:=word}<br>
${name:?word}<br>
${name:+word}<br>
</div>
リダイレクト・パイプ<br>
<div>
&lt; file<br>
&lt;&lt; word<br>
&gt; file<br>
&gt;&gt; file<br>
command | command<br>
</div>
特殊コマンド<br>
<div>
:<br>
. file<br>
break [n]<br>
continue [n]<br>
cd<br>
echo<br>
eval [arg]<br>
exit [n]<br>
export [name]<br>
pwd<br>
return [n]<br>
set<br>
shift [n]<br>
unset<br>
test<br>
[<br>
sleep<br>
true<br>
false<br>
read [val]<br>
seq [LAST | FIRST LAST | FIRST INCR LAST]<br>
</div>
<br>
<br>
独自に追加した文法・コマンドは以下の通りです。<br>
<br>
オブジェクト定義 (objectのinstance_listのfieldにvalueを設定)<br>
<div>
object:instance_list:field=value
</div>
オブジェクト置換 (objectのinstance_listのfieldの値)<br>
<div>
${object:instance_list:field=argument}
</div>
オブジェクト操作コマンド<br>
<div>
new object [field=value,  ...]<br>
del object:instance_list <br>
exist object:instance_list <br>
get object:instance_list [-write -field -id -quote] field=argument ...<br>
put object:instance_list field=value ...<br>
exe object:instance_list field=argument ...<br>
cpy object:source,destination[,destination,...] field<br>
move object:instance1,instance2<br>
movetop object:instance<br>
movelast object:instance<br>
exch object:instance1,instance2<br>
object [object1 object2 ... [-name -version -parent -id -field -size
-current -last -instnace -instances] [field ...]]<br>
derive [-instance] object<br>
</div>
評価コマンド (数式expを評価)<br>
<div>
dexpr exp<br>
iexpr exp<br>
</div>
</div>

<br>
<hr>
<br>

<a name="SCRIPT_STARTUP">&nbsp;</a>
<h2><a href="#TOP">スタートアップスクリプト</a></h2>
<br>
<div>
Ngraph は実行時に<br>
<ol>
 <li>~/.Ngraph/
 <li>Ngraphをインストールしたディレクトリ
</ol>
をこの順番で検索し, はじめに見つかったスタートアップスクリプトファイル
(.Ngraph) を自動的に読み込みます。<br>
<br>
<ul>
コマンドラインオプション
<ul>-i script_name</ul>
でスタートアップスクリプトを明示的に指定する事もできます。
</ul>
スタートアップスクリプトファイルは Ngraph 独自のマクロ言語 (Ngraph スク
リプト) で記述されており, ユーザがカスタマイズすることもできます。<br>
<br>
<ul>
<li>Ngraph のコマンドラインオプションは(上記 -i オプションを除いて)全てスタートアップスクリプトファイルに渡されます。
<li>配布状態では, スタートアップスクリプトファイルは
<ol>
<li>起動するユーザインターフェースの指定(system::login_shell)
<li>.Ngraph.ngp の読込 (.Ngraph.ngp は[設定]-[初期状態として保存(グラフ)]で作成できます)
<li>コマンドラインオプションの解析
</ol>
を行います。
</ul>
</div>

<br>
<hr>
<br>


<a name="COMMANDLINE">&nbsp;</a>
<h2><a href="#TOP">コマンドラインオプション</a></h2>
<br>
<div>
Ngraph を起動する時のコマンドラインオプションの形式は
<ul>ngraph [-i script_name] [option1 option2 ...]</ul>
で、-i オプションでスタートアップスクリプトを指定します。
残りのオプションは全てスタートアップスクリプトに渡され、その中で解析されます。
スタートアップスクリプトはユーザがカスタマイズする事ができるので、独自のコマンドラインオプションを作成する事ができます。<br>
<br>
配布状態のスタートアップスクリプト(.Ngraph)で有効なコマンドラインオプションは以下の通りです。
<dl>
<dt>-x num
<dd>X軸のデータカラムを num にします。</dd>
<dt>-y num
<dd>Y軸のデータカラムを num にします。</dd>
<dt>-X -U
<dd>データの X 軸をそれぞれ X, U 軸にします。
<dt>-Y -R
<dd>データの Y 軸をそれぞれ Y, R 軸にします。
<dt>-d type
<dd>プロットタイプを type にします。</dd>
<dt>-m num
<dd>マークを num にします。</dd>
<dt>-o num
<dd>マークのサイズ num にします。</dd>
<dt>-l sylte
<dd>線種を style にします(-l "100 100" の様に指定)。</dd>
<dt>-w num
<dd>線幅を num にします。</dd>
<dt>-c R G B
<dd>プロット色を R G B にします。</dd>
<dt>-C R G B
<dd>第二プロット色を R G B にします。</dd>
<dt>-s num
<dd>先頭スキップ行を num にします。</dd>
<dt>-r num
<dd>読込ステップ行数を num にします。</dd>
<dt>-f num
<dd>最終行数を num にします。</dd>
<dt>-vx num
<dd>隣接平均数を num にします。</dd>
<dt>-vy num
<dd>隣接平均数を num にします。</dd>
<dt>-mx math
<dd>変換数式を math にします。</dd>
<dt>-my math
<dd>変換数式を math にします。</dd>
<dt>-ex type
<dd>X軸のスケール方法を type (linear, log, inverse) にします。</dd>
<dt>-ey type
<dd>Y軸のスケール方法を type (linear, log, inverse) にします。</dd>
<dt>-zx min max inc
<dd>X軸のスケールを min, max, inc にします。</dd>
<dt>-zy min max inc
<dd>Y軸のスケールを min, max, inc にします。</dd>
<dt>-g
<dd>データファイルから設定を読み込みます。</dd>
<dt>-png -pdf -ps -eps -svg
<dd>ngp ファイルをそれぞれの画像ファイルに変換します。
<dt> -p
<dd> ngp ファイルを印刷します。
<dt> -P
<dd> ngp ファイルを外部ドライバを利用して印刷します。
</dl>
</div>

<br>
<hr>
<br>

</body></html>


